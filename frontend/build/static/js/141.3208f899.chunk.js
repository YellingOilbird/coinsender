"use strict";(self.webpackChunkfront_tc=self.webpackChunkfront_tc||[]).push([[141],{3141:function(e,n,t){t.r(n),t.d(n,{default:function(){return D}});var r=t(9439),o=t(6333),a=t(2791),c=t(4165),s=t(5861),i=t(9523),l=t.n(i),u=t(6438),p=t(8963);function d(e){return g.apply(this,arguments)}function g(){return(g=(0,s.Z)((0,c.Z)().mark((function e(n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new p.Account(window.near.connection,n).state();case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}var m,f,x,h,_,S=t(1203),v=function(e,n,t,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(0,s.Z)((0,c.Z)().mark((function a(){var s,i,g,m,f,x,h,_,v,b,w,Z,k,j,N;return(0,c.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s=localStorage.getItem("token_decimals"),i={},m=0,""===e||!e){a.next=27;break}f=e,x=RegExp(/^([0-9a-zA-Z][\_\-0-9a-zA-Z.]*)[\t,|\||=| ]([0-9\.\,]+$)/,"gm");case 6:if(null===(g=x.exec(f))){a.next=15;break}return h=g[1].toLowerCase(),_=parseFloat(g[2].replace(",",".").replace(" ","")),a.next=11,d(h);case 11:v=a.sent,g[1]&&_&&v&&(i.hasOwnProperty(h)?i[h]+=_:i[h]=_,m+=_),a.next=6;break;case 15:return a.next=17,(0,S.i)(r);case 17:b=a.sent,w=(0,u.G)(m,Number(s)),Z=l()(w||"0").toString(),Number(b)>=Number(Z)?n("SEND"):(n("DEPOSIT"),k=+p.utils.format.formatNearAmount(Z,Number(s))-+p.utils.format.formatNearAmount(b,Number(s))+.1,j=p.utils.format.parseNearAmount(k.toString()),console.log(j+" deposit"),console.log(k+" deposit_ui"),localStorage.setItem("need_to_deposit",j||""),localStorage.setItem("need_to_deposit_ui",k.toFixed(0))),N=JSON.stringify(i),localStorage.setItem("operations",N),localStorage.setItem("operations_number",Object.keys(i).length.toString()),"NEAR"!==r&&o&&n("STORAGE"),a.next=28;break;case 27:t("There are no accounts");case 28:return console.log(i),a.abrupt("return",{total:m,accounts:i});case 30:case"end":return a.stop()}}),a)})))},b=t(168),w=t(8789),Z=w.ZP.p(m||(m=(0,b.Z)(["\n  font-size: 32px; \n  animation: blink 3s ease-in-out; \n  margin-top: 10px;\n"]))),k=w.ZP.div(f||(f=(0,b.Z)(["\n  margin: 0 auto;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),j=t(184),N=function(){return(0,j.jsxs)(k,{children:[(0,j.jsx)(o.dk,{children:"Verify accounts to delete incorrect ones"}),(0,j.jsx)(Z,{children:"\u2705\u2705\u2705"})]})},I=t(4386),E=function(e,n){return(0,s.Z)((0,c.Z)().mark((function e(){var t,r,o,a,s;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("need_to_deposit"),r=localStorage.getItem("need_to_deposit_ui"),o=localStorage.getItem("token_id"),e.prev=3,localStorage.removeItem("need_to_deposit"),localStorage.removeItem("need_to_deposit_ui"),localStorage.setItem("need_to_send",String(t)),localStorage.setItem("need_to_send_ui",String(r)),"NEAR"!==o){e.next=14;break}return a=window.contract,e.next=12,a.deposit_near({},window.gas,t);case 12:e.next=18;break;case 14:return s=window.contractFT,console.log(t),e.next=18,s(n).ft_transfer_call({receiver_id:I.p_,amount:t,msg:"deposit"},window.gas,"1");case 18:e.next=25;break;case 20:e.prev=20,e.t0=e.catch(3),console.log(e.t0),localStorage.removeItem("need_to_deposit"),localStorage.removeItem("need_to_deposit_ui");case 25:case"end":return e.stop()}}),e,null,[[3,20]])})))},y=function(){return(0,j.jsx)(k,{children:(0,j.jsx)(Z,{children:(0,j.jsx)("i",{className:"nes-icon coin is-large"})})})},C=t(6871),A=w.ZP.div(x||(x=(0,b.Z)(["\n  position: relative;\n  margin: auto;\n  width: 100%;\n  padding: 1.5rem 2rem;\n  margin-top: 40px;\n  \n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),O=w.ZP.h2(h||(h=(0,b.Z)(["\n  position: absolute;\n  top:-15px;\n  left: 10px;\n  padding: 0 0.5rem;\n  font-size: 1rem;\n  background-color: #fff;\n"]))),R=w.ZP.textarea(_||(_=(0,b.Z)(['\n  width: 80%;\n  height: 170px;\n  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;\n  outline: none;\n']))),T=function(e){var n=e.accounts,t=e.setAccounts;return(0,j.jsxs)(A,{className:"nes-container with-title",children:[(0,j.jsx)(O,{children:"account, amount"}),(0,j.jsx)(R,{className:"nes-textarea",value:n,onChange:function(e){return t(e.target.value)}})]})},P=function(e,n,t){return(0,s.Z)((0,c.Z)().mark((function r(){var o,a,i,u,p,d,g,m;return(0,c.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=window.contract,a=window.contractFT,i=window.gas,u=localStorage.getItem("operations"),p=JSON.parse(u||"[]"),d=Object.keys(p),g=localStorage.getItem("token_id"),m=function(){var e=(0,s.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(d.length>0)){e.next=5;break}return e.delegateYield((0,c.Z)().mark((function e(){var n,r,o,i,l,u,p,g,m;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=20,r=-1,o=[],0,i=[],l=0;l<d.length;l++)l%n===0&&(r++,o[r]=[]),o[r].push(d[l]);u=0;case 7:if(!(u<o.length)){e.next=13;break}return p=function(){var e=(0,s.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(o[u].map(function(){var e=(0,s.Z)((0,c.Z)().mark((function e(n){var r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(t).storage_balance_of({account_id:n});case 2:if(r=e.sent,console.log(r),!r){e.next=9;break}1,console.log("Registered account: "+n),e.next=10;break;case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=11,p().then((function(e){Object.values(e).map((function(e){e&&(console.log(e),i.push(e))})),u++}));case 11:e.next=7;break;case 13:return localStorage.setItem("need_to_fund",String(i.length)),g=[],i.length>0?i.length>n?(m=i.slice(0,n),g.push(m),console.log("sliced+: "+m.length+" accs : ",g)):(g.push(i),console.log("sliced-: "+i.length+" accs : ",g)):g=[],e.abrupt("return",{v:g});case 17:case"end":return e.stop()}}),e)}))(),"t0",2);case 2:if("object"!==typeof(n=e.t0)){e.next=5;break}return e.abrupt("return",n.v);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r.next=10,m().then(function(){var r=(0,s.Z)((0,c.Z)().mark((function r(a){var s,u;return(0,c.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:0,a.length>0?(console.log("______accs_____",a[0].length),console.log("[]...[]length :",a.length),20,a[0].length<=20?(s=l()(a[0].length).multiply(l()("1250000000000000000000")).toString(),o.multi_storage_deposit({accounts:a[0],token_id:g},i,s),console.log("processed"+a[0]+"accounts"),u=Number(localStorage.getItem("need_to_fund")),localStorage.setItem("need_to_fund",(u-a[0].length).toString()),0===Number(u-a[0].length)&&(localStorage.setItem("transition","1"),console.log("fin"))):console.log("SOMETHING WRONG WITH SLICES! see slice in console! \n")):(console.log("set"),v(e,n,(function(){}),t)());case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());case 10:case"end":return r.stop()}}),r)})))},F=function(){return(0,j.jsxs)(k,{children:[(0,j.jsx)(o.dk,{children:"Every fungible token except USN needs registered storage balance in token contract (0.00125 NEAR). When you click at CHECK STORAGE button we check this for all recipients and redirect you to approve storage registration for non-registered receiver(s)"}),(0,j.jsx)(Z,{children:"\ud83d\udcbe"})]})},D=function(){var e=(0,C.TH)().pathname,n=(0,a.useState)(""),t=(0,r.Z)(n,2),c=t[0],s=t[1],i=(0,a.useState)("VERIFY"),l=(0,r.Z)(i,2),u=l[0],p=l[1],d=(0,a.useState)(""),g=(0,r.Z)(d,2),m=g[0],f=g[1],x=function(){var e=(0,C.s0)(),n=(0,C.TH)().pathname;return function(){var t=n.split("/")[3];e("/processing/send/".concat(t))}}(),h=e.split("/")[3];return(0,a.useEffect)((function(){var e=localStorage.getItem("need_to_deposit"),n=localStorage.getItem("need_to_send"),t=localStorage.getItem("operations");null!==n&&null!==t&&null===e&&(p("SEND"),f(t||""))}),[]),(0,j.jsxs)(o.im,{children:[(0,j.jsx)(o.Dx,{children:"VERIFY AND CHECK ACCOUNTS"}),"VERIFY"===u&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(N,{}),(0,j.jsx)(o.mJ,{className:"nes-btn",onClick:v(m,p,s,h,"NEAR"!==h),children:"VERIFY"}),(0,j.jsx)(o.mJ,{className:"nes-btn is-warning",onClick:function(){f("")},children:"CLEAR ACCOUNTS"})]}),"DEPOSIT"===u&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(y,{}),(0,j.jsxs)(o.mJ,{className:"nes-btn is-success",onClick:E(0,h),children:["Deposit ",Number(localStorage.getItem("need_to_deposit_ui")).toFixed(2)," ",h]})]}),"SEND"===u&&(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(o.mJ,{className:"nes-btn is-warning",onClick:x,children:"GO TO SEND!"})}),"STORAGE"===u&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(F,{}),(0,j.jsx)(o.mJ,{className:"nes-btn",onClick:P(m,p,h),children:"CHECK STORAGE"})]}),(0,j.jsx)("br",{}),(0,j.jsx)(o.Dx,{style:{marginBottom:"5px"},children:"EXAMPLES:"}),(0,j.jsxs)(o.dk,{children:[(0,j.jsx)("p",{children:"hello.testnet 1"}),(0,j.jsx)("p",{children:"world.testnet 1"})]}),(0,j.jsx)(o.jj,{children:c}),(0,j.jsx)(T,{accounts:m,setAccounts:f})]})}},6438:function(e,n,t){function r(e){return""===(e=e.replace(/^0+/,""))?"0":e}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e)return null;n=Number(n);var t=String(e),o=(t=t.replace(/,/g,"").trim()).split("."),a=o[0],c=o[1]||"";return r(a+c.padEnd(n,"0"))}t.d(n,{G:function(){return o}})},6333:function(e,n,t){t.d(n,{Dx:function(){return p},dk:function(){return d},im:function(){return u},jj:function(){return m},mJ:function(){return g}});var r,o,a,c,s,i=t(168),l=t(8789),u=l.ZP.div(r||(r=(0,i.Z)(["\n  padding-top: 125px;\n  margin: 0 auto;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),p=l.ZP.h2(o||(o=(0,i.Z)(["\n  text-align: center;\n  margin-bottom: 30px;\n"]))),d=l.ZP.p.attrs((function(e){return e}))(a||(a=(0,i.Z)(["\n  text-align: center;\n  font-size: 14px;\n  margin-top: ",";\n"])),(function(e){return e.mt&&e.mt})),g=l.ZP.button.attrs((function(e){return e}))(c||(c=(0,i.Z)(["\n  margin: auto;\n  width: 384px;\n  margin:15px 0;\n  margin-top: ",";\n  \n  @media(max-width:400px) {\n    width: 300px;\n  }\n\n  @media(max-width:320px) {\n    width: 250px;\n  }\n"])),(function(e){return e.mt&&e.mt})),m=l.ZP.p(s||(s=(0,i.Z)(["\n  color: #b23434;\n  margin-top: 20px;\n  margin-bottom: -10px;\n"])))}}]);
//# sourceMappingURL=141.3208f899.chunk.js.map